pipeline:
  create-db:
    db1:
      action: dsunit:init
      datastore: db1
      recreate: true
      config:
        driverName: mysql
        descriptor: '[username]:[password]@tcp(127.0.0.1:3306)/[dbname]?parseTime=true'
        credentials: $mysqlCredentials
      admin:
        datastore: mysql
        ping: true
        config:
          driverName: mysql
          descriptor: '[username]:[password]@tcp(127.0.0.1:3306)/[dbname]?parseTime=true'
          credentials: $mysqlCredentials
      scripts:
        - URL: datastore/db1/schema.sql

    db2:
      action: dsunit:init
      datastore: db2
      recreate: true
      config:
        driverName: mysql
        descriptor: '[username]:[password]@tcp(127.0.0.1:3306)/[dbname]?parseTime=true'
        credentials: $mysqlCredentials
      admin:
        datastore: mysql
        ping: true
        config:
          driverName: mysql
          descriptor: '[username]:[password]@tcp(127.0.0.1:3306)/[dbname]?parseTime=true'
          credentials: $mysqlCredentials
      scripts:
        - URL: datastore/db2/schema.sql

    db3:
      action: dsunit:init
      datastore: db3
      recreate: true
      config:
        driverName: mysql
        descriptor: '[username]:[password]@tcp(127.0.0.1:3306)/[dbname]?parseTime=true'
        credentials: $mysqlCredentials
      admin:
        datastore: mysql
        ping: true
        config:
          driverName: mysql
          descriptor: '[username]:[password]@tcp(127.0.0.1:3306)/[dbname]?parseTime=true'
          credentials: $mysqlCredentials
      scripts:
        - URL: datastore/db3/schema.sql


  transfer:
    action: dsunit:init
    datastore: transfer
    recreate: true
    config:
      driverName: mysql
      descriptor: '[username]:[password]@tcp(127.0.0.1:3306)/[dbname]?parseTime=true'
      credentials: $mysqlCredentials
    admin:
      datastore: mysql
      ping: true
      config:
        driverName: mysql
        descriptor: '[username]:[password]@tcp(127.0.0.1:3306)/[dbname]?parseTime=true'
        credentials: $mysqlCredentials
